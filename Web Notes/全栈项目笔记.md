## **全栈项目笔记：**

**创建main.js文件入口，配置babel**：配置项命令：

`npm install --save-dev babel-preset-es2015`

`npm install babel-register --save-dev`

`npm install --save-dev babel-preset-es2015`



--save 与--save-dev中一个是保存到package.json中的dependence 一个是devDependencies 在上线的时候用nom install --production 可以选择不安装devDependencies中的内容 这样减少了插件的大小。

在main.js中引入：

```
require('babel-register');
require('./app.js');
```

由于入口文件变为main.js，运行的时候运行npm main.js  不再是app.js

### React项目踩坑：

1.在onClick传参的时候一定要（）=>this.functon(参数)；且不能在点击的回调中传 否则默认为传了event事件实参。

2.相同路由开头如/product与/product/detail开头的路由菜单不选中和展开BUG，解决方案：

![1574674363719](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574674363719.png)

![1574674553837](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574674553837.png)

### vue管理系统项目踩坑：

1.egg和koa中间件中用async函数后面next()的时候一定要加await.否则ctx.body不执行。

![1574324520201](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574324520201.png)

2.在vue-cli 2.0中定义async函数时默认是没有安装babel-transform-runtime来转化为ES5语法的 所以需要安装及配置后才能定义。

![1574324931243](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574324931243.png)

3.使用v-model绑定表格类每个对象动态变化时使用遍历等方式增加新属性进行双向绑定。

elemenui表格为例：![1574328509613](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574328509613.png)

4.需要实现路由按需加载的话，如果使用的是 Babel，你将需要添加 syntax-dynamic-import 插件，才能使 Babel 可以正确地解析语法。

![1574660933998](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574660933998.png)

![1574661258101](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574661258101.png)

在vue-cli中使用import按需引入：

![1574666119748](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1574666119748.png)

5.elementUI踩坑：el-dialog的body部分是懒加载而非一开始就加载：所以一开始调用resetFields方法会报错，解决方案为延迟resetFields的调用，让dom先渲染出来。  以及表单的resetFields方法初始值指定的BUG：若点了编辑再点添加，编辑时初始值就已经是有数据了，因此解决方案为延迟赋值，让body先渲染出来，初始值为空，再赋值。

![1575509647968](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1575509647968.png)

![1575509662951](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1575509662951.png)

6.vue中使用Jquery:

 @1.npm install jquery --save-dev 
	
    @2.找到build文件夹下的webpack.base.conf.js
    第一行加入
        var webpack=require('webpack')
    
    在module.exports中加入
        plugins: [ 
               new webpack.ProvidePlugin({ 
                 $:"jquery", 
                 jQuery:"jquery", 
                "windows.jQuery":"jquery"
                }) 
    
              ]   
7.使用egg-socket.io时，在定义中间件的时候需要从ctx.app获得需要的app挂载的参数，而不能直接使用app.

![1577067075456](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1577067075456.png)

8.使用map做模糊搜索功能时，注意map是映射作用，映射前后的数组长度不变，不满足条件的值为undefined，数组长度不变，需要过滤改变数组长度应用filter。

![1577156142533](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1577156142533.png)

9.使用事件绑定时，对于不是原生JS绑定，在每次组件或者部分页面销毁时，要销毁事件，否则会导致事件绑定重复。

![1577171280772](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1577171280772.png)

10.使用egg-socket.io时注意：（大坑）

![1578642935184](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1578642935184.png)

11.使用egg-socket.io时的几种常用推送：

![1578884662517](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1578884662517.png)

![1578885898646](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1578885898646.png)

12.egg-suqulize定义外键关联的几种方式：

![1578985079111](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1578985079111.png)

![1578985176327](C:\Users\Administrator\AppData\Roaming\Typora\typora-user-images\1578985176327.png)

